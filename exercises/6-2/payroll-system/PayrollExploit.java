import java.util.List;

/**
 * A simulation of a payroll sabotage attempt.
 */
public class PayrollExploit {
    public static void main(String[] args) {
        Payroll payroll = new Payroll();
        payroll.addRecord(new SalaryRecord("Alice", 5000));
        payroll.addRecord(new SalaryRecord("Bob", 4500));

        System.out.println("Initial State:");
        payroll.printPayroll();

        // The "Auditor" (or a malicious plugin) gets the records
        List<SalaryRecord> records = payroll.getRecords();

        System.out.println("\n--- Sabotage in progress ---");
        // 1. Modifying the list itself (Adding a fake employee)
        records.add(new SalaryRecord("Malicious Hacker", 99999));

        // 2. Modifying the elements of the list (Increasing Alice's salary)
        for (SalaryRecord r : records) {
            if ("Alice".equals(r.getEmployeeName())) {
                r.setAmount(100000);
            }
        }

        System.out.println("\nFinal State of Payroll Object:");
        payroll.printPayroll();

        System.out.println("\nCheck: Was the internal payroll modified? " +
                (payroll.getRecords().size() > 2 ? "YES (Vulnerable)" : "NO (Secure)"));
    }
}
