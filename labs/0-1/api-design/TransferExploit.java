package labs.api_design;

public class TransferExploit {
    public static void main(String[] args) {
        VulnerableBankService bank = new VulnerableBankService();

        int aliceId = 101;
        int bobId = 202;

        System.out.println("Initial Balances:");
        System.out.println("Alice: $" + bank.getBalance(aliceId));
        System.out.println("Bob: $" + bank.getBalance(bobId));
        System.out.println();

        // SCENARIO: A developer wants to transfer $100 from Alice to Bob.
        // But they accidentally swap the parameters!
        // Instead of transfer(aliceId, bobId, 100), they write:
        System.out.println("[!] Developer mistake: swapping 'from' and 'to' IDs...");
        bank.transfer(bobId, aliceId, 100.0);

        System.out.println("\nFinal Balances:");
        System.out.println("Alice: $" + bank.getBalance(aliceId)); // Now has $1100
        System.out.println("Bob: $" + bank.getBalance(bobId)); // Now has $400 (unintended withdrawal!)

        System.out.println("\nRESULT: Bob's money was withdrawn instead of Alice's due to a simple parameter swap.");
    }
}
