/**
 * InputValidationExploit.java
 * 
 * This class demonstrates how missing input validation can be exploited to
 * cause unintended behavior or bypass financial logic.
 */
public class InputValidationExploit {
    public static void main(String[] args) {
        System.out.println("=== Lab 5-1: Validate Inputs ===\n");

        VulnerableInventoryService vulnerableService = new VulnerableInventoryService();
        SecureInventoryService secureService = new SecureInventoryService();

        // 1. Legitimate order
        System.out.println("[Step 1] Processing a legitimate order...");
        vulnerableService.processOrder(10, 19.99);

        // 2. Malicious order (Negative quantity)
        // An attacker might use this to "sell back" items or trigger a refund.
        System.out.println("[Step 2] Attacker submitting a negative quantity...");
        vulnerableService.processOrder(-50, 100.0);

        // 3. Secure order processing
        System.out.println("[Step 3] Attempting the same negative quantity on the Secure Service...");
        try {
            secureService.processOrder(-50, 100.0);
        } catch (IllegalArgumentException e) {
            System.err.println("CAUGHT EXPECTED EXCEPTION: " + e.getMessage());
            System.out.println("The Secure Service blocked the invalid input.");
        }
    }
}
